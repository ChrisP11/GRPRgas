{% extends "base.html" %}
{% load custom_filters %}
{% block title %}Gas-Cup Teams{% endblock %}
{% block content %}
<h3 class="mb-3">Assign Teams â€“ Gas Cup</h3>

{% if messages %}
  {% for m in messages %}
    <div class="alert alert-{{ m.tags|default:'info' }} py-1 small">
      {{ m }}
    </div>
  {% endfor %}
{% endif %}

<form method="post" class="table-responsive">
  {% csrf_token %}
  <table class="table table-sm align-middle">
    <thead class="table-light">
      <tr><th>Player</th><th class="text-center">PGA</th><th class="text-center">LIV</th></tr>
    </thead>
    <tbody>
      {% for inv in players %}
        <tr>
          <td>{{ inv.PID.FirstName }} {{ inv.PID.LastName }}
              <small class="text-muted">({{ inv.TTID.CourseID.courseTimeSlot }})</small></td>

          {% for team in teams %}
            <td class="text-center">
                <input type="radio"
                    name="p_{{ inv.PID_id }}"
                    value="{{ team }}"
                    {% if assignments and assignments|dict_get:inv.PID_id == team %}checked{% endif %}
                    required>
            </td>
            {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <button class="btn btn-primary">Continue</button>
  <a href="{% url 'games_view' %}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
